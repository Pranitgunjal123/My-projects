<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wards Management | CityCare Hospital</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary: #FF445B;
    --primary-light: rgba(255, 68, 91, 0.1);
    --primary-dark: #D32F42;
    --sidebar-bg: #1E293B;
    --card-bg: #FFFFFF;
    --bg-color: #F8FAFC;
    --text-dark: #1E293B;
    --text-medium: #64748B;
    --text-light: #94A3B8;
    --border: #E2E8F0;
    --success: #10B981;
    --warning: #F59E0B;
    --info: #3B82F6;
    --danger: #EF4444;
    --purple: #8B5CF6;
    --icu: #DC2626;
    --general: #3B82F6;
    --private: #8B5CF6;
    --semi-private: #10B981;
    --ward-occupied: #EF4444;
    --ward-available: #10B981;
    --shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
    --radius: 16px;
    --curve: 20px;
}

body {
    font-family: 'Poppins', sans-serif;
    background: var(--bg-color);
    color: var(--text-dark);
    display: flex;
    min-height: 100vh;
    overflow-x: hidden;
}

/* Sidebar */
.sidebar {
    width: 260px;
    background: var(--sidebar-bg);
    padding: 30px 20px;
    position: fixed;
    height: 100vh;
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease;
    z-index: 100;
}

.logo {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 40px;
    color: white;
    font-size: 24px;
    font-weight: 700;
}

.logo i {
    color: var(--primary);
    background: rgba(255, 255, 255, 0.1);
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
}

.nav-links {
    display: flex;
    flex-direction: column;
    gap: 8px;
    flex: 1;
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 16px;
    color: var(--text-light);
    text-decoration: none;
    border-radius: 10px;
    transition: all 0.3s;
    font-weight: 500;
}

.nav-item:hover {
    background: rgba(255, 255, 255, 0.08);
    color: white;
}

.nav-item.active {
    background: var(--primary);
    color: white;
    box-shadow: 0 4px 12px rgba(255, 68, 91, 0.3);
}

.nav-item i {
    width: 20px;
    font-size: 18px;
}

.user-profile {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    margin-top: 20px;
}

.user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--primary);
}

.user-info h4 {
    color: white;
    font-size: 14px;
    font-weight: 600;
}

.user-info p {
    color: var(--text-light);
    font-size: 12px;
}

/* Main Content */
.main {
    flex: 1;
    margin-left: 260px;
    padding: 30px;
    animation: fadeIn 0.8s ease;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Header */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
}

.header h1 {
    font-size: 28px;
    font-weight: 700;
}

.header-actions {
    display: flex;
    gap: 15px;
}

.header-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    background: var(--primary);
    color: white;
    padding: 12px 24px;
    border-radius: 10px;
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s;
    border: none;
    cursor: pointer;
    font-family: 'Poppins', sans-serif;
    font-size: 14px;
}

.header-btn:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
}

.header-btn.secondary {
    background: var(--success);
}

.header-btn.secondary:hover {
    background: #0D9C6E;
}

.header-btn.warning {
    background: var(--warning);
}

.header-btn.warning:hover {
    background: #D97706;
}

.header-btn.info {
    background: var(--info);
}

.header-btn.info:hover {
    background: #2563EB;
}

/* Stats Cards */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 24px;
    margin-bottom: 40px;
}

.stat-card {
    background: white;
    border-radius: var(--curve);
    padding: 25px;
    box-shadow: var(--shadow);
    display: flex;
    align-items: center;
    gap: 20px;
    transition: all 0.3s ease;
    border: 1px solid var(--border);
    position: relative;
    overflow: hidden;
}

.stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.stat-icon {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: white;
}

.stat-icon.purple {
    background: linear-gradient(135deg, #8B5CF6, #7C3AED);
}

.stat-icon.blue {
    background: linear-gradient(135deg, #3B82F6, #2563EB);
}

.stat-icon.green {
    background: linear-gradient(135deg, #10B981, #059669);
}

.stat-icon.red {
    background: linear-gradient(135deg, #EF4444, #DC2626);
}

.stat-icon.orange {
    background: linear-gradient(135deg, #F59E0B, #D97706);
}

.stat-content {
    flex: 1;
}

.stat-value {
    font-size: 32px;
    font-weight: 700;
    margin-bottom: 5px;
}

.stat-label {
    font-size: 14px;
    color: var(--text-medium);
    font-weight: 500;
}

.stat-change {
    font-size: 12px;
    margin-top: 5px;
    display: flex;
    align-items: center;
    gap: 5px;
}

.stat-change.positive {
    color: var(--success);
}

.stat-change.negative {
    color: var(--danger);
}

/* Hospital Floor Plan */
.hospital-floor {
    background: white;
    border-radius: var(--curve);
    padding: 25px;
    box-shadow: var(--shadow);
    margin-bottom: 40px;
}

.floor-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
}

.floor-header h3 {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 18px;
}

.floor-selector {
    display: flex;
    gap: 10px;
}

.floor-btn {
    padding: 8px 16px;
    background: var(--bg-color);
    border: 1px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.3s;
}

.floor-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.floor-plan {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
}

.ward-card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    border: 2px solid var(--border);
    transition: all 0.3s;
    cursor: pointer;
}

.ward-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
}

.ward-card.icu {
    border-color: var(--icu);
    background: linear-gradient(to bottom right, rgba(220, 38, 38, 0.05), rgba(220, 38, 38, 0.01));
}

.ward-card.private {
    border-color: var(--private);
    background: linear-gradient(to bottom right, rgba(139, 92, 246, 0.05), rgba(139, 92, 246, 0.01));
}

.ward-card.general {
    border-color: var(--general);
    background: linear-gradient(to bottom right, rgba(59, 130, 246, 0.05), rgba(59, 130, 246, 0.01));
}

.ward-card.semi-private {
    border-color: var(--semi-private);
    background: linear-gradient(to bottom right, rgba(16, 185, 129, 0.05), rgba(16, 185, 129, 0.01));
}

.ward-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
}

.ward-title {
    font-weight: 600;
    color: var(--text-dark);
    font-size: 16px;
}

.ward-type {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 600;
    display: inline-block;
}

.ward-type.icu {
    background: rgba(220, 38, 38, 0.1);
    color: var(--icu);
}

.ward-type.private {
    background: rgba(139, 92, 246, 0.1);
    color: var(--private);
}

.ward-type.general {
    background: rgba(59, 130, 246, 0.1);
    color: var(--general);
}

.ward-type.semi-private {
    background: rgba(16, 185, 129, 0.1);
    color: var(--semi-private);
}

.ward-beds {
    display: flex;
    gap: 8px;
    margin-bottom: 15px;
}

.bed {
    width: 30px;
    height: 30px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 600;
    color: white;
    transition: all 0.3s;
}

.bed.occupied {
    background: var(--ward-occupied);
}

.bed.available {
    background: var(--ward-available);
}

.bed.selected {
    transform: scale(1.1);
    box-shadow: 0 0 0 2px var(--primary);
}

.ward-info {
    display: flex;
    justify-content: space-between;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid var(--border);
    font-size: 12px;
    color: var(--text-medium);
}

/* Action Bar */
.action-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding: 20px;
    background: white;
    border-radius: var(--curve);
    box-shadow: var(--shadow);
}

.action-buttons {
    display: flex;
    gap: 12px;
}

.action-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    background: var(--primary-light);
    color: var(--primary);
    padding: 10px 20px;
    border-radius: 8px;
    border: 1px solid var(--border);
    cursor: pointer;
    transition: all 0.3s;
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
}

.action-btn:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.action-btn.green {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
    border-color: rgba(16, 185, 129, 0.2);
}

.action-btn.green:hover {
    background: var(--success);
    color: white;
}

.action-btn.blue {
    background: rgba(59, 130, 246, 0.1);
    color: var(--info);
    border-color: rgba(59, 130, 246, 0.2);
}

.action-btn.blue:hover {
    background: var(--info);
    color: white;
}

/* Search and Filter */
.search-filter {
    display: flex;
    gap: 15px;
    margin-bottom: 25px;
    flex-wrap: wrap;
}

.search-box {
    flex: 1;
    min-width: 300px;
    position: relative;
}

.search-box i {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-light);
}

.search-box input {
    width: 100%;
    padding: 12px 15px 12px 45px;
    border: 1px solid var(--border);
    border-radius: 10px;
    font-family: 'Poppins', sans-serif;
    font-size: 14px;
    background: white;
    transition: border-color 0.3s;
}

.search-box input:focus {
    outline: none;
    border-color: var(--primary);
}

.filter-select {
    padding: 12px 15px;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: white;
    font-family: 'Poppins', sans-serif;
    font-size: 14px;
    min-width: 150px;
    cursor: pointer;
    transition: border-color 0.3s;
}

.filter-select:focus {
    outline: none;
    border-color: var(--primary);
}

/* Patients in Wards Table */
.patients-table-container {
    background: white;
    border-radius: var(--curve);
    padding: 30px;
    box-shadow: var(--shadow);
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
}

.section-header h2 {
    font-size: 20px;
    color: var(--text-dark);
    display: flex;
    align-items: center;
    gap: 10px;
}

.view-all {
    color: var(--primary);
    text-decoration: none;
    font-weight: 500;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 5px;
}

.view-all:hover {
    text-decoration: underline;
}

.patients-table {
    width: 100%;
    border-collapse: collapse;
}

.patients-table th {
    text-align: left;
    padding: 15px;
    background: var(--bg-color);
    color: var(--text-medium);
    font-weight: 600;
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-bottom: 2px solid var(--border);
    cursor: pointer;
    user-select: none;
    position: relative;
}

.patients-table th:hover {
    background: rgba(255, 68, 91, 0.05);
}

.patients-table th i {
    margin-left: 8px;
    font-size: 12px;
    opacity: 0.5;
    transition: opacity 0.3s;
}

.patients-table th:hover i {
    opacity: 1;
}

.patients-table th.sort-asc i,
.patients-table th.sort-desc i {
    opacity: 1;
    color: var(--primary);
}

.patients-table td {
    padding: 15px;
    border-bottom: 1px solid var(--border);
    font-size: 14px;
    vertical-align: middle;
}

.patient-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.patient-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--primary-light);
}

.patient-id {
    font-weight: 600;
    color: var(--text-dark);
    font-size: 13px;
    margin-bottom: 2px;
}

.patient-name {
    font-weight: 600;
    color: var(--text-dark);
    font-size: 14px;
}

.patient-meta {
    font-size: 12px;
    color: var(--text-medium);
}

.ward-badge {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 600;
    display: inline-block;
}

.ward-badge.icu {
    background: rgba(220, 38, 38, 0.1);
    color: var(--icu);
}

.ward-badge.private {
    background: rgba(139, 92, 246, 0.1);
    color: var(--private);
}

.ward-badge.general {
    background: rgba(59, 130, 246, 0.1);
    color: var(--general);
}

.ward-badge.semi-private {
    background: rgba(16, 185, 129, 0.1);
    color: var(--semi-private);
}

.actions {
    display: flex;
    gap: 8px;
}

.action-icon-btn {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-color);
    color: var(--text-medium);
    border: none;
    cursor: pointer;
    transition: all 0.3s;
}

.action-icon-btn:hover {
    background: var(--primary-light);
    color: var(--primary);
}

.action-icon-btn.view:hover {
    background: rgba(59, 130, 246, 0.1);
    color: var(--info);
}

.action-icon-btn.transfer:hover {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning);
}

.action-icon-btn.discharge:hover {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
}

.action-icon-btn.medical:hover {
    background: rgba(139, 92, 246, 0.1);
    color: var(--purple);
}

/* Mobile Menu Toggle */
.menu-toggle {
    display: none;
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 101;
    background: var(--primary);
    color: white;
    border: none;
    width: 44px;
    height: 44px;
    border-radius: 10px;
    font-size: 20px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(255, 68, 91, 0.3);
}

/* Modal Styles */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.modal-content {
    background: white;
    border-radius: var(--curve);
    width: 100%;
    max-width: 800px;
    max-height: 90vh;
    overflow-y: auto;
    animation: modalSlide 0.3s ease;
}

@keyframes modalSlide {
    from { transform: translateY(-50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.modal-header {
    padding: 25px 30px;
    border-bottom: 1px solid var(--border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h3 {
    font-size: 22px;
    color: var(--text-dark);
}

.modal-close {
    background: none;
    border: none;
    font-size: 24px;
    color: var(--text-medium);
    cursor: pointer;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    transition: all 0.3s;
}

.modal-close:hover {
    background: var(--bg-color);
    color: var(--primary);
}

.modal-body {
    padding: 30px;
}

/* Bed Selection Grid */
.bed-selection-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 15px;
    margin: 20px 0;
    padding: 20px;
    background: var(--bg-color);
    border-radius: 12px;
}

.bed-select {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s;
    font-weight: 600;
    font-size: 14px;
}

.bed-select:hover {
    transform: scale(1.05);
}

.bed-select.available {
    background: var(--ward-available);
    color: white;
    border-color: var(--ward-available);
}

.bed-select.occupied {
    background: var(--ward-occupied);
    color: white;
    border-color: var(--ward-occupied);
    cursor: not-allowed;
}

.bed-select.selected {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(255, 68, 91, 0.3);
}

/* Form Styles */
.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.form-group {
    margin-bottom: 15px;
}

.form-group.full-width {
    grid-column: 1 / -1;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--text-dark);
    font-size: 14px;
}

.form-group label.required::after {
    content: " *";
    color: var(--danger);
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--border);
    border-radius: 8px;
    font-family: 'Poppins', sans-serif;
    font-size: 14px;
    transition: border-color 0.3s;
    background: white;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--primary);
}

.form-actions {
    display: flex;
    gap: 15px;
    justify-content: flex-end;
    padding-top: 20px;
    border-top: 1px solid var(--border);
}

/* Responsive */
@media (max-width: 1200px) {
    .stats-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 992px) {
    .sidebar {
        transform: translateX(-100%);
    }
    
    .main {
        margin-left: 0;
        padding: 20px;
    }
    
    .menu-toggle {
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .sidebar.active {
        transform: translateX(0);
    }
    
    .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 20px;
    }
    
    .header-actions {
        width: 100%;
        justify-content: space-between;
        flex-wrap: wrap;
    }
    
    .action-bar {
        flex-direction: column;
        gap: 20px;
        align-items: flex-start;
    }
    
    .action-buttons {
        flex-wrap: wrap;
    }
    
    .floor-plan {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .search-filter {
        flex-direction: column;
    }
    
    .search-box {
        min-width: 100%;
    }
    
    .patients-table {
        display: block;
        overflow-x: auto;
    }
    
    .header-btn {
        padding: 10px 16px;
        font-size: 13px;
    }
    
    .floor-plan {
        grid-template-columns: 1fr;
    }
}
</style>
</head>

<body>
<!-- Mobile Menu Toggle -->
<button class="menu-toggle" id="menuToggle">
    <i class="fas fa-bars"></i>
</button>

<!-- Sidebar -->
<aside class="sidebar" id="sidebar">
    <div class="logo">
        <i class="fas fa-hospital-alt"></i>
        <span>CityCare</span>
    </div>
    
    <nav class="nav-links">
        <a href="dashboard.html" class="nav-item">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard</span>
        </a>
        <a href="doctors.html" class="nav-item">
            <i class="fas fa-user-md"></i>
            <span>Doctors</span>
        </a>
        <a href="patients.html" class="nav-item">
            <i class="fas fa-procedures"></i>
            <span>Patients</span>
        </a>
        <a href="appointments.html" class="nav-item">
            <i class="fas fa-calendar-check"></i>
            <span>Appointments</span>
        </a>
        <a href="wards.html" class="nav-item active">
            <i class="fas fa-bed"></i>
            <span>Wards</span>
        </a>
        <!--   
        <a href="#" class="nav-item">
            <i class="fas fa-bed"></i>
            <span>Pharmacy</span>
        </a> --> 
        <a href="#" class="nav-item">
            <i class="fas fa-file-invoice-dollar"></i>
            <span>Billing</span>
        </a>
        <a href="#" class="nav-item">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
        </a>
    </nav>
    
    <div class="user-profile">
        <img src="https://randomuser.me/api/portraits/men/45.jpg" alt="Admin" class="user-avatar">
        <div class="user-info">
            <h4>Dr. Arjun Mehta</h4>
            <p>Hospital Administrator</p>
        </div>
    </div>
</aside>

<!-- Main Content -->
<main class="main">
    <!-- Header -->
    <header class="header">
        <h1>Wards & Bed Management</h1>
        <div class="header-actions">
            <button class="header-btn" onclick="openAddWardModal()">
                <i class="fas fa-plus"></i>
                Add New Ward
            </button>
            <button class="header-btn secondary" onclick="openAssignBedModal()">
                <i class="fas fa-user-injured"></i>
                Assign Bed
            </button>
            <button class="header-btn info" onclick="openTransferModal()">
                <i class="fas fa-exchange-alt"></i>
                Transfer Patient
            </button>
            <button class="header-btn warning" onclick="printFloorPlan()">
                <i class="fas fa-print"></i>
                Print Layout
            </button>
        </div>
    </header>

    <!-- Stats Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon purple">
                <i class="fas fa-hospital"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value" id="totalWards">18</div>
                <div class="stat-label">Total Wards</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>2 new this month</span>
                </div>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon blue">
                <i class="fas fa-bed"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value" id="totalBeds">246</div>
                <div class="stat-label">Total Beds</div>
                <div class="stat-change positive">
                    <i class="fas fa-bed"></i>
                    <span>38 ICU, 208 General</span>
                </div>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon green">
                <i class="fas fa-user-check"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value" id="availableBeds">42</div>
                <div class="stat-label">Available Beds</div>
                <div class="stat-change negative">
                    <i class="fas fa-exclamation-circle"></i>
                    <span>ICU: 2 available</span>
                </div>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon red">
                <i class="fas fa-procedures"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value" id="occupiedBeds">204</div>
                <div class="stat-label">Occupied Beds</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>82.9% occupancy</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Hospital Floor Plan -->
    <div class="hospital-floor">
        <div class="floor-header">
            <h3><i class="fas fa-building"></i> Hospital Floor Plan</h3>
            <div class="floor-selector">
                <button class="floor-btn active" onclick="switchFloor('ground')">Ground Floor</button>
                <button class="floor-btn" onclick="switchFloor('first')">First Floor</button>
                <button class="floor-btn" onclick="switchFloor('second')">Second Floor</button>
                <button class="floor-btn" onclick="switchFloor('icu')">ICU Floor</button>
            </div>
        </div>
        <div class="floor-plan" id="floorPlan">
            <!-- Wards will be populated by JavaScript -->
        </div>
    </div>

    <!-- Action Bar -->
    <div class="action-bar">
        <div class="action-buttons">
            <button class="action-btn" onclick="viewWardDetails()">
                <i class="fas fa-eye"></i>
                View Ward Details
            </button>
            <button class="action-btn green" onclick="dischargeFromWard()">
                <i class="fas fa-sign-out-alt"></i>
                Discharge from Ward
            </button>
            <button class="action-btn blue" onclick="generateWardReport()">
                <i class="fas fa-file-medical-alt"></i>
                Generate Report
            </button>
            <button class="action-btn" onclick="maintenanceRequest()">
                <i class="fas fa-tools"></i>
                Maintenance
            </button>
        </div>
        <div>
            <span id="selectedCount">0 wards selected</span>
        </div>
    </div>

    <!-- Search and Filter -->
    <div class="search-filter">
        <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" id="searchInput" placeholder="Search by Patient Name, Ward, Bed Number...">
        </div>
        <select class="filter-select" id="wardTypeFilter">
            <option value="">All Ward Types</option>
            <option value="icu">ICU</option>
            <option value="general">General Ward</option>
            <option value="private">Private Ward</option>
            <option value="semi-private">Semi-Private</option>
        </select>
        <select class="filter-select" id="floorFilter">
            <option value="">All Floors</option>
            <option value="ground">Ground Floor</option>
            <option value="first">First Floor</option>
            <option value="second">Second Floor</option>
            <option value="icu">ICU Floor</option>
        </select>
        <select class="filter-select" id="availabilityFilter">
            <option value="">All Beds</option>
            <option value="available">Available Beds</option>
            <option value="occupied">Occupied Beds</option>
        </select>
    </div>

    <!-- Patients in Wards Table -->
    <section class="patients-table-container">
        <div class="section-header">
            <h2><i class="fas fa-procedures"></i> Patients Currently in Wards</h2>
            <a href="patients.html" class="view-all">
                View All Patients
                <i class="fas fa-chevron-right"></i>
            </a>
        </div>
        
        <table class="patients-table">
            <thead>
                <tr>
                    <th style="width: 30px;"></th>
                    <th data-sort="patient">Patient <i class="fas fa-sort"></i></th>
                    <th data-sort="doctor">Attending Doctor <i class="fas fa-sort"></i></th>
                    <th data-sort="ward">Ward & Bed <i class="fas fa-sort"></i></th>
                    <th data-sort="admitDate">Admit Date <i class="fas fa-sort"></i></th>
                    <th data-sort="expectedDischarge">Expected Discharge <i class="fas fa-sort"></i></th>
                    <th data-sort="status">Status <i class="fas fa-sort"></i></th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="patientsTableBody">
                <!-- Patients in wards will be populated by JavaScript -->
            </tbody>
        </table>
    </section>
</main>

<!-- Add Ward Modal -->
<div class="modal" id="addWardModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-plus"></i> Add New Ward</h3>
            <button class="modal-close" onclick="closeModal('addWardModal')">&times;</button>
        </div>
        <div class="modal-body">
            <form id="wardForm" class="ward-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="required">Ward Name</label>
                        <input type="text" id="wardName" required placeholder="e.g., Cardiology Ward A">
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Ward Type</label>
                        <select id="wardType" required>
                            <option value="">Select Type</option>
                            <option value="icu">ICU (Intensive Care Unit)</option>
                            <option value="general">General Ward</option>
                            <option value="private">Private Ward</option>
                            <option value="semi-private">Semi-Private Ward</option>
                            <option value="maternity">Maternity Ward</option>
                            <option value="pediatric">Pediatric Ward</option>
                            <option value="surgical">Surgical Ward</option>
                            <option value="isolation">Isolation Ward</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Floor</label>
                        <select id="wardFloor" required>
                            <option value="">Select Floor</option>
                            <option value="ground">Ground Floor</option>
                            <option value="first">First Floor</option>
                            <option value="second">Second Floor</option>
                            <option value="icu">ICU Floor (Special)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Total Beds</label>
                        <input type="number" id="totalBeds" required min="1" max="50" value="10">
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Charge Nurse</label>
                        <select id="chargeNurse" required>
                            <option value="">Select Nurse</option>
                            <option value="NUR001">Sarah Johnson (Senior Nurse)</option>
                            <option value="NUR002">Michael Chen (ICU Specialist)</option>
                            <option value="NUR003">Priya Patel (Pediatric Nurse)</option>
                            <option value="NUR004">David Wilson (Surgical Nurse)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Assigned Doctor</label>
                        <select id="assignedDoctor">
                            <option value="">Optional - Assign Doctor</option>
                            <option value="DOC001">Dr. Rajesh Kumar</option>
                            <option value="DOC002">Dr. Priya Sharma</option>
                            <option value="DOC003">Dr. Amit Patel</option>
                            <option value="DOC004">Dr. Anjali Verma</option>
                        </select>
                    </div>
                    
                    <div class="form-group full-width">
                        <label>Special Equipment</label>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" value="ventilator"> Ventilator
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" value="monitor"> Patient Monitor
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" value="oxygen"> Oxygen Supply
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" value="defibrillator"> Defibrillator
                            </label>
                            <label style="display: flex; align-items: center; gap: 5px;">
                                <input type="checkbox" value="suction"> Suction Machine
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group full-width">
                        <label>Ward Description</label>
                        <textarea id="wardDescription" rows="3" placeholder="Describe the ward facilities, specializations..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Daily Rate (â‚¹)</label>
                        <input type="number" id="dailyRate" min="0" placeholder="e.g., 2500">
                    </div>
                    
                    <div class="form-group">
                        <label>Contact Extension</label>
                        <input type="text" id="contactExtension" placeholder="e.g., 1234">
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="header-btn">
                        <i class="fas fa-save"></i>
                        Create Ward
                    </button>
                    <button type="reset" class="header-btn warning">
                        <i class="fas fa-redo"></i>
                        Reset Form
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Assign Bed Modal -->
<div class="modal" id="assignBedModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-user-injured"></i> Assign Patient to Bed</h3>
            <button class="modal-close" onclick="closeModal('assignBedModal')">&times;</button>
        </div>
        <div class="modal-body">
            <form id="assignBedForm" class="assign-bed-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="required">Select Patient</label>
                        <select id="patientSelect" required onchange="loadPatientDetails()">
                            <option value="">Select Patient</option>
                            <option value="PAT001234">Rohan Sharma (Hypertension)</option>
                            <option value="PAT001235">Priya Verma (Migraine)</option>
                            <option value="PAT001236">Arun Patel (Fractured Leg)</option>
                            <option value="PAT001237">Meena Reddy (Pneumonia)</option>
                            <option value="PAT001239">Anjali Das (Appendicitis)</option>
                        </select>
                        <small><a href="patients.html" style="color: var(--primary);">View all patients</a></small>
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Admitting Doctor</label>
                        <select id="admittingDoctor" required>
                            <option value="">Select Doctor</option>
                            <option value="DOC001">Dr. Rajesh Kumar</option>
                            <option value="DOC002">Dr. Priya Sharma</option>
                            <option value="DOC003">Dr. Amit Patel</option>
                            <option value="DOC004">Dr. Anjali Verma</option>
                        </select>
                        <small><a href="doctors.html" style="color: var(--primary);">View all doctors</a></small>
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Admission Type</label>
                        <select id="admissionType" required>
                            <option value="">Select Type</option>
                            <option value="emergency">Emergency Admission</option>
                            <option value="scheduled">Scheduled Admission</option>
                            <option value="transfer">Transfer from Another Ward</option>
                            <option value="observation">Observation</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Select Ward</label>
                        <select id="wardSelect" required onchange="loadAvailableBeds()">
                            <option value="">Select Ward</option>
                            <option value="ICU-101">ICU-101 (Intensive Care)</option>
                            <option value="GW-201">GW-201 (General Ward)</option>
                            <option value="PW-301">PW-301 (Private Ward)</option>
                            <option value="SPW-202">SPW-202 (Semi-Private)</option>
                            <option value="MW-102">MW-102 (Maternity)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label class="required">Available Beds in Selected Ward</label>
                    <div class="bed-selection-grid" id="bedSelectionGrid">
                        <!-- Beds will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label class="required">Admission Date</label>
                        <input type="date" id="admissionDate" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Expected Stay (Days)</label>
                        <input type="number" id="expectedStay" min="1" max="30" value="3">
                    </div>
                    
                    <div class="form-group">
                        <label>Priority Level</label>
                        <select id="priorityLevel">
                            <option value="normal">Normal</option>
                            <option value="high">High Priority</option>
                            <option value="critical">Critical</option>
                        </select>
                    </div>
                    
                    <div class="form-group full-width">
                        <label>Admission Notes</label>
                        <textarea id="admissionNotes" rows="3" placeholder="Reason for admission, special requirements..."></textarea>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="header-btn">
                        <i class="fas fa-bed"></i>
                        Assign Bed
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Transfer Patient Modal -->
<div class="modal" id="transferModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="fas fa-exchange-alt"></i> Transfer Patient</h3>
            <button class="modal-close" onclick="closeModal('transferModal')">&times;</button>
        </div>
        <div class="modal-body">
            <form id="transferForm" class="transfer-form">
                <div class="form-grid">
                    <div class="form-group">
                        <label class="required">Select Patient</label>
                        <select id="transferPatient" required onchange="loadCurrentWard()">
                            <option value="">Select Patient</option>
                            <option value="PAT001234">Rohan Sharma (ICU-101, Bed 3)</option>
                            <option value="PAT001235">Priya Verma (GW-201, Bed 5)</option>
                            <option value="PAT001236">Arun Patel (SPW-202, Bed 2)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Current Ward</label>
                        <input type="text" id="currentWard" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Transfer to Ward</label>
                        <select id="transferToWard" required onchange="loadTransferBeds()">
                            <option value="">Select Ward</option>
                            <option value="ICU-101">ICU-101 (Intensive Care)</option>
                            <option value="GW-201">GW-201 (General Ward)</option>
                            <option value="PW-301">PW-301 (Private Ward)</option>
                            <option value="SPW-202">SPW-202 (Semi-Private)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Transfer Reason</label>
                        <select id="transferReason" required>
                            <option value="">Select Reason</option>
                            <option value="condition_improved">Condition Improved</option>
                            <option value="condition_worsened">Condition Worsened</option>
                            <option value="specialized_care">Requires Specialized Care</option>
                            <option value="ward_full">Current Ward Full</option>
                            <option value="patient_request">Patient Request</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label class="required">Available Beds in Destination Ward</label>
                    <div class="bed-selection-grid" id="transferBedGrid">
                        <!-- Transfer beds will be populated by JavaScript -->
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label>Transfer Notes</label>
                    <textarea id="transferNotes" rows="3" placeholder="Notes about the transfer..."></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="header-btn">
                        <i class="fas fa-exchange-alt"></i>
                        Confirm Transfer
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Mobile sidebar toggle
    const menuToggle = document.getElementById('menuToggle');
    const sidebar = document.getElementById('sidebar');
    
    menuToggle.addEventListener('click', function() {
        sidebar.classList.toggle('active');
        const icon = menuToggle.querySelector('i');
        if (sidebar.classList.contains('active')) {
            icon.classList.remove('fa-bars');
            icon.classList.add('fa-times');
        } else {
            icon.classList.remove('fa-times');
            icon.classList.add('fa-bars');
        }
    });
    
    // Sample data for wards
    const wardsData = [
        {
            id: "ICU-101",
            name: "ICU 101",
            type: "icu",
            floor: "icu",
            totalBeds: 8,
            availableBeds: 2,
            chargeNurse: "Michael Chen",
            doctor: "Dr. Rajesh Kumar",
            patients: [
                { patientId: "PAT001234", patientName: "Rohan Sharma", bedNumber: 3, admissionDate: "2024-03-10" },
                { patientId: "PAT001237", patientName: "Meena Reddy", bedNumber: 5, admissionDate: "2024-03-13" },
                { patientId: "PAT001241", patientName: "Sneha Joshi", bedNumber: 7, admissionDate: "2024-03-12" }
            ],
            equipment: ["ventilator", "monitor", "oxygen", "defibrillator"],
            description: "Intensive Care Unit with advanced monitoring"
        },
        {
            id: "GW-201",
            name: "General Ward 201",
            type: "general",
            floor: "ground",
            totalBeds: 20,
            availableBeds: 8,
            chargeNurse: "Sarah Johnson",
            doctor: "Dr. Sanjay Gupta",
            patients: [
                { patientId: "PAT001235", patientName: "Priya Verma", bedNumber: 5, admissionDate: "2024-03-12" },
                { patientId: "PAT001240", patientName: "Rahul Nair", bedNumber: 12, admissionDate: "2024-03-13" }
            ],
            equipment: ["monitor", "oxygen"],
            description: "General medical ward"
        },
        {
            id: "PW-301",
            name: "Private Ward 301",
            type: "private",
            floor: "first",
            totalBeds: 12,
            availableBeds: 4,
            chargeNurse: "Priya Patel",
            doctor: "Dr. Anjali Verma",
            patients: [
                { patientId: "PAT001236", patientName: "Arun Patel", bedNumber: 2, admissionDate: "2024-03-11" }
            ],
            equipment: ["monitor", "oxygen", "tv", "fridge"],
            description: "Private rooms with attached bathroom"
        },
        {
            id: "SPW-202",
            name: "Semi-Private 202",
            type: "semi-private",
            floor: "ground",
            totalBeds: 16,
            availableBeds: 6,
            chargeNurse: "David Wilson",
            doctor: "Dr. Amit Patel",
            patients: [
                { patientId: "PAT001239", patientName: "Anjali Das", bedNumber: 3, admissionDate: "2024-03-14" }
            ],
            equipment: ["monitor", "oxygen"],
            description: "Shared rooms (2 patients per room)"
        },
        {
            id: "MW-102",
            name: "Maternity Ward",
            type: "maternity",
            floor: "ground",
            totalBeds: 15,
            availableBeds: 7,
            chargeNurse: "Emma Watson",
            doctor: "Dr. Priya Sharma",
            patients: [],
            equipment: ["monitor", "oxygen", "baby_monitor"],
            description: "Maternity and neonatal care"
        },
        {
            id: "SW-401",
            name: "Surgical Ward",
            type: "surgical",
            floor: "second",
            totalBeds: 18,
            availableBeds: 5,
            chargeNurse: "Robert Brown",
            doctor: "Dr. Anjali Verma",
            patients: [],
            equipment: ["monitor", "oxygen", "suction"],
            description: "Post-operative recovery ward"
        }
    ];
    
    // Sample patients in wards data
    const patientsInWards = [
        {
            id: "PAT001234",
            name: "Rohan Sharma",
            avatar: "https://randomuser.me/api/portraits/men/22.jpg",
            age: 45,
            gender: "Male",
            doctor: "Dr. Rajesh Kumar",
            ward: "ICU-101",
            bed: "Bed 3",
            admissionDate: "2024-03-10",
            expectedDischarge: "2024-03-20",
            diagnosis: "Hypertension, Diabetes Type 2",
            status: "critical",
            priority: "high"
        },
        {
            id: "PAT001235",
            name: "Priya Verma",
            avatar: "https://randomuser.me/api/portraits/women/33.jpg",
            age: 32,
            gender: "Female",
            doctor: "Dr. Sanjay Gupta",
            ward: "GW-201",
            bed: "Bed 5",
            admissionDate: "2024-03-12",
            expectedDischarge: "2024-03-15",
            diagnosis: "Migraine, Vertigo",
            status: "stable",
            priority: "normal"
        },
        {
            id: "PAT001236",
            name: "Arun Patel",
            avatar: "https://randomuser.me/api/portraits/men/55.jpg",
            age: 28,
            gender: "Male",
            doctor: "Dr. Anjali Verma",
            ward: "PW-301",
            bed: "Bed 2",
            admissionDate: "2024-03-11",
            expectedDischarge: "2024-03-18",
            diagnosis: "Fractured Leg",
            status: "recovering",
            priority: "normal"
        },
        {
            id: "PAT001237",
            name: "Meena Reddy",
            avatar: "https://randomuser.me/api/portraits/women/12.jpg",
            age: 6,
            gender: "Female",
            doctor: "Dr. Amit Patel",
            ward: "ICU-101",
            bed: "Bed 5",
            admissionDate: "2024-03-13",
            expectedDischarge: "2024-03-17",
            diagnosis: "Pneumonia",
            status: "critical",
            priority: "high"
        },
        {
            id: "PAT001239",
            name: "Anjali Das",
            avatar: "https://randomuser.me/api/portraits/women/45.jpg",
            age: 42,
            gender: "Female",
            doctor: "Dr. Anjali Verma",
            ward: "SPW-202",
            bed: "Bed 3",
            admissionDate: "2024-03-14",
            expectedDischarge: "2024-03-16",
            diagnosis: "Appendicitis",
            status: "post-op",
            priority: "normal"
        },
        {
            id: "PAT001240",
            name: "Rahul Nair",
            avatar: "https://randomuser.me/api/portraits/men/35.jpg",
            age: 35,
            gender: "Male",
            doctor: "Dr. Sanjay Gupta",
            ward: "GW-201",
            bed: "Bed 12",
            admissionDate: "2024-03-13",
            expectedDischarge: "2024-03-14",
            diagnosis: "Gastroenteritis",
            status: "stable",
            priority: "normal"
        },
        {
            id: "PAT001241",
            name: "Sneha Joshi",
            avatar: "https://randomuser.me/api/portraits/women/58.jpg",
            age: 58,
            gender: "Female",
            doctor: "Dr. Rajesh Kumar",
            ward: "ICU-101",
            bed: "Bed 7",
            admissionDate: "2024-03-12",
            expectedDischarge: "2024-03-25",
            diagnosis: "Heart Valve Replacement",
            status: "critical",
            priority: "high"
        }
    ];
    
    // Initialize floor plan
    const floorPlan = document.getElementById('floorPlan');
    let selectedWards = new Set();
    let currentSort = { column: null, direction: 'asc' };
    let currentFloor = 'ground';
    
    // Populate floor plan with wards
    function populateFloorPlan(floor = 'ground') {
        floorPlan.innerHTML = '';
        currentFloor = floor;
        
        const floorWards = wardsData.filter(ward => ward.floor === floor);
        
        if (floorWards.length === 0) {
            floorPlan.innerHTML = `<p style="text-align: center; color: var(--text-medium); grid-column: 1/-1; padding: 40px;">No wards on this floor</p>`;
            return;
        }
        
        floorWards.forEach(ward => {
            const wardCard = createWardCard(ward);
            floorPlan.appendChild(wardCard);
        });
    }
    
    // Create ward card
    function createWardCard(ward) {
        const card = document.createElement('div');
        card.className = `ward-card ${ward.type}`;
        card.dataset.id = ward.id;
        
        const bedOccupancy = Math.round(((ward.totalBeds - ward.availableBeds) / ward.totalBeds) * 100);
        
        // Create bed visualizations
        let bedsHTML = '';
        for (let i = 1; i <= ward.totalBeds; i++) {
            const isOccupied = ward.patients.some(p => p.bedNumber === i);
            bedsHTML += `<div class="bed ${isOccupied ? 'occupied' : 'available'}" title="Bed ${i}">${i}</div>`;
        }
        
        card.innerHTML = `
            <div class="ward-header">
                <div>
                    <div class="ward-title">${ward.name}</div>
                    <span class="ward-type ${ward.type}">${ward.type.toUpperCase()}</span>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 12px; color: var(--text-medium);">Occupancy</div>
                    <div style="font-weight: 600; color: var(--text-dark);">${bedOccupancy}%</div>
                </div>
            </div>
            <div class="ward-beds">
                ${bedsHTML}
            </div>
            <div class="ward-info">
                <div>
                    <div style="font-size: 11px; color: var(--text-medium);">Patients</div>
                    <div style="font-weight: 600;">${ward.patients.length}</div>
                </div>
                <div>
                    <div style="font-size: 11px; color: var(--text-medium);">Available</div>
                    <div style="font-weight: 600; color: var(--success);">${ward.availableBeds}</div>
                </div>
                <div>
                    <div style="font-size: 11px; color: var(--text-medium);">Total</div>
                    <div style="font-weight: 600;">${ward.totalBeds}</div>
                </div>
            </div>
        `;
        
        // Add click event
        card.addEventListener('click', function() {
            this.classList.toggle('selected');
            const wardId = this.dataset.id;
            
            if (this.classList.contains('selected')) {
                selectedWards.add(wardId);
            } else {
                selectedWards.delete(wardId);
            }
            
            updateSelectedCount();
        });
        
        return card;
    }
    
    // Populate patients table
    function populatePatientsTable() {
        const tableBody = document.getElementById('patientsTableBody');
        tableBody.innerHTML = '';
        
        patientsInWards.forEach((patient, index) => {
            const row = createPatientRow(patient, index);
            tableBody.appendChild(row);
        });
    }
    
    // Create patient row
    function createPatientRow(patient, index) {
        const row = document.createElement('tr');
        row.dataset.id = patient.id;
        
        const statusClass = getStatusClass(patient.status);
        const statusText = getStatusText(patient.status);
        const wardClass = getWardClass(patient.ward);
        
        row.innerHTML = `
            <td>
                <input type="checkbox" class="patient-checkbox" data-id="${patient.id}" onchange="togglePatientSelection('${patient.id}', this.checked)">
            </td>
            <td>
                <div class="patient-info">
                    <img src="${patient.avatar}" alt="Patient" class="patient-avatar">
                    <div>
                        <div class="patient-id">${patient.id}</div>
                        <div class="patient-name">${patient.name}</div>
                        <div class="patient-meta">${patient.age} yrs, ${patient.gender} â€¢ ${patient.diagnosis}</div>
                    </div>
                </div>
            </td>
            <td>
                <div class="doctor-name">${patient.doctor}</div>
                <div class="patient-meta"><a href="doctors.html" style="color: var(--primary);">View doctor</a></div>
            </td>
            <td>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <span class="ward-badge ${wardClass}">${patient.ward}</span>
                    <span style="font-weight: 600;">${patient.bed}</span>
                </div>
                <div class="patient-meta">Floor: ${getWardFloor(patient.ward)}</div>
            </td>
            <td>${formatDate(patient.admissionDate)}</td>
            <td>${formatDate(patient.expectedDischarge)}</td>
            <td><span class="ward-badge ${statusClass}">${statusText}</span></td>
            <td>
                <div class="actions">
                    <button class="action-icon-btn view" title="View Patient" onclick="viewPatientDetails('${patient.id}')">
                        <i class="fas fa-eye"></i>
                    </button>
                    <button class="action-icon-btn transfer" title="Transfer" onclick="transferPatient('${patient.id}')">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                    <button class="action-icon-btn discharge" title="Discharge" onclick="dischargePatient('${patient.id}')">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                    <button class="action-icon-btn medical" title="Medical Records" onclick="viewMedicalRecords('${patient.id}')">
                        <i class="fas fa-file-medical-alt"></i>
                    </button>
                </div>
            </td>
        `;
        
        return row;
    }
    
    // Helper functions
    function getWardClass(wardId) {
        if (wardId.includes('ICU')) return 'icu';
        if (wardId.includes('PW')) return 'private';
        if (wardId.includes('SPW')) return 'semi-private';
        return 'general';
    }
    
    function getWardFloor(wardId) {
        if (wardId.includes('101') || wardId.includes('102')) return 'ICU Floor';
        if (wardId.includes('201') || wardId.includes('202')) return 'Ground Floor';
        if (wardId.includes('301')) return 'First Floor';
        if (wardId.includes('401')) return 'Second Floor';
        return 'Unknown';
    }
    
    function getStatusClass(status) {
        switch(status) {
            case 'critical': return 'icu';
            case 'stable': return 'semi-private';
            case 'recovering': return 'general';
            case 'post-op': return 'private';
            default: return 'general';
        }
    }
    
    function getStatusText(status) {
        return status.charAt(0).toUpperCase() + status.slice(1).replace('-', ' ');
    }
    
    function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' });
    }
    
    // Switch floor view
    window.switchFloor = function(floor) {
        // Update active button
        document.querySelectorAll('.floor-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        
        // Update floor plan
        populateFloorPlan(floor);
    };
    
    // Search and Filter functionality
    const searchInput = document.getElementById('searchInput');
    const wardTypeFilter = document.getElementById('wardTypeFilter');
    const floorFilter = document.getElementById('floorFilter');
    const availabilityFilter = document.getElementById('availabilityFilter');
    
    function filterPatients() {
        const searchTerm = searchInput.value.toLowerCase();
        const wardType = wardTypeFilter.value;
        const floor = floorFilter.value;
        const availability = availabilityFilter.value;
        
        patientsInWards.forEach((patient, index) => {
            const row = document.querySelector(`tr[data-id="${patient.id}"]`);
            if (!row) return;
            
            const matchesSearch = 
                patient.name.toLowerCase().includes(searchTerm) ||
                patient.id.toLowerCase().includes(searchTerm) ||
                patient.ward.toLowerCase().includes(searchTerm) ||
                patient.diagnosis.toLowerCase().includes(searchTerm);
            
            const matchesWardType = !wardType || getWardClass(patient.ward) === wardType;
            const matchesFloor = !floor || getWardFloor(patient.ward).toLowerCase().includes(floor);
            
            row.style.display = matchesSearch && matchesWardType && matchesFloor ? '' : 'none';
        });
        
        updateStats();
    }
    
    // Initialize event listeners for search and filter
    searchInput.addEventListener('input', filterPatients);
    wardTypeFilter.addEventListener('change', filterPatients);
    floorFilter.addEventListener('change', filterPatients);
    availabilityFilter.addEventListener('change', filterPatients);
    
    // Sorting functionality
    document.querySelectorAll('.patients-table th[data-sort]').forEach(th => {
        th.addEventListener('click', function() {
            const column = this.getAttribute('data-sort');
            
            if (currentSort.column === column) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.column = column;
                currentSort.direction = 'asc';
            }
            
            sortPatients(column, currentSort.direction);
            updateSortIndicators(column, currentSort.direction);
        });
    });
    
    function sortPatients(column, direction) {
        const sortFunctions = {
            patient: (a, b) => a.name.localeCompare(b.name),
            doctor: (a, b) => a.doctor.localeCompare(b.doctor),
            ward: (a, b) => a.ward.localeCompare(b.ward),
            admitDate: (a, b) => new Date(a.admissionDate) - new Date(b.admissionDate),
            expectedDischarge: (a, b) => new Date(a.expectedDischarge) - new Date(b.expectedDischarge),
            status: (a, b) => a.status.localeCompare(b.status)
        };
        
        if (sortFunctions[column]) {
            patientsInWards.sort(sortFunctions[column]);
            if (direction === 'desc') {
                patientsInWards.reverse();
            }
            populatePatientsTable();
        }
    }
    
    function updateSortIndicators(column, direction) {
        document.querySelectorAll('.patients-table th[data-sort]').forEach(th => {
            th.classList.remove('sort-asc', 'sort-desc');
            const icon = th.querySelector('i');
            icon.className = 'fas fa-sort';
        });
        
        const currentTh = document.querySelector(`th[data-sort="${column}"]`);
        if (currentTh) {
            currentTh.classList.add(`sort-${direction}`);
            const icon = currentTh.querySelector('i');
            icon.className = direction === 'asc' ? 'fas fa-sort-up' : 'fas fa-sort-down';
        }
    }
    
    // Patient selection functions
    window.togglePatientSelection = function(patientId, isChecked) {
        if (isChecked) {
            selectedWards.add(patientId);
        } else {
            selectedWards.delete(patientId);
        }
        updateSelectedCount();
    };
    
    // Select All functionality
    const selectAllCheckbox = document.createElement('input');
    selectAllCheckbox.type = 'checkbox';
    selectAllCheckbox.id = 'selectAll';
    selectAllCheckbox.style.marginLeft = '10px';
    selectAllCheckbox.addEventListener('change', function() {
        const checkboxes = document.querySelectorAll('.patient-checkbox');
        checkboxes.forEach(checkbox => {
            checkbox.checked = this.checked;
            const patientId = checkbox.getAttribute('data-id');
            if (this.checked) {
                selectedWards.add(patientId);
            } else {
                selectedWards.delete(patientId);
            }
        });
        updateSelectedCount();
    });
    
    // Add select all checkbox to header
    document.querySelector('.section-header h2').appendChild(selectAllCheckbox);
    
    function updateSelectedCount() {
        const count = selectedWards.size;
        document.getElementById('selectedCount').textContent = `${count} ward${count !== 1 ? 's' : ''} selected`;
    }
    
    // Update statistics
    function updateStats() {
        const totalWards = wardsData.length;
        let totalBeds = 0;
        let availableBeds = 0;
        let occupiedBeds = 0;
        
        wardsData.forEach(ward => {
            totalBeds += ward.totalBeds;
            availableBeds += ward.availableBeds;
            occupiedBeds += (ward.totalBeds - ward.availableBeds);
        });
        
        const occupancyRate = Math.round((occupiedBeds / totalBeds) * 100);
        
        document.getElementById('totalWards').textContent = totalWards;
        document.getElementById('totalBeds').textContent = totalBeds;
        document.getElementById('availableBeds').textContent = availableBeds;
        document.getElementById('occupiedBeds').textContent = occupiedBeds;
        
        // Update occupancy warnings
        const occupancyElement = document.querySelector('#occupiedBeds + .stat-change');
        if (occupancyRate > 85) {
            occupancyElement.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <span>High occupancy warning!</span>';
            occupancyElement.className = 'stat-change negative';
        } else if (occupancyRate > 70) {
            occupancyElement.innerHTML = '<i class="fas fa-info-circle"></i> <span>Moderate occupancy</span>';
            occupancyElement.className = 'stat-change';
        } else {
            occupancyElement.innerHTML = '<i class="fas fa-check-circle"></i> <span>Good availability</span>';
            occupancyElement.className = 'stat-change positive';
        }
    }
    
    // Modal functions
    window.openAddWardModal = function() {
        // Set default date to today
        document.getElementById('addWardModal').style.display = 'flex';
    };
    
    window.openAssignBedModal = function() {
        // Set admission date to today
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('admissionDate').value = today;
        
        // Load available beds
        loadAvailableBeds();
        
        document.getElementById('assignBedModal').style.display = 'flex';
    };
    
    window.openTransferModal = function() {
        document.getElementById('transferModal').style.display = 'flex';
    };
    
    window.closeModal = function(modalId) {
        document.getElementById(modalId).style.display = 'none';
    };
    
    // Load available beds for assignment
    window.loadAvailableBeds = function() {
        const wardId = document.getElementById('wardSelect').value;
        const bedGrid = document.getElementById('bedSelectionGrid');
        
        if (!wardId) {
            bedGrid.innerHTML = '<p style="text-align: center; color: var(--text-medium); grid-column: 1/-1;">Please select a ward first</p>';
            return;
        }
        
        const ward = wardsData.find(w => w.id === wardId);
        if (!ward) return;
        
        bedGrid.innerHTML = '';
        
        // Determine occupied beds
        const occupiedBeds = ward.patients.map(p => p.bedNumber);
        
        // Create bed selection grid
        for (let i = 1; i <= ward.totalBeds; i++) {
            const isOccupied = occupiedBeds.includes(i);
            const bedElement = document.createElement('div');
            bedElement.className = `bed-select ${isOccupied ? 'occupied' : 'available'}`;
            bedElement.textContent = `Bed ${i}`;
            bedElement.dataset.bed = i;
            
            if (!isOccupied) {
                bedElement.addEventListener('click', function() {
                    // Remove selected class from all beds
                    document.querySelectorAll('.bed-select').forEach(b => b.classList.remove('selected'));
                    // Add selected class to clicked bed
                    this.classList.add('selected');
                });
            }
            
            bedGrid.appendChild(bedElement);
        }
    };
    
    // Load patient details when selecting patient
    window.loadPatientDetails = function() {
        const patientId = document.getElementById('patientSelect').value;
        // In a real app, you would fetch patient details from the database
    };
    
    // Load current ward for transfer
    window.loadCurrentWard = function() {
        const patientId = document.getElementById('transferPatient').value;
        const patient = patientsInWards.find(p => p.id === patientId);
        
        if (patient) {
            document.getElementById('currentWard').value = `${patient.ward} (${patient.bed})`;
        }
    };
    
    // Load beds for transfer
    window.loadTransferBeds = function() {
        const wardId = document.getElementById('transferToWard').value;
        const bedGrid = document.getElementById('transferBedGrid');
        
        if (!wardId) {
            bedGrid.innerHTML = '<p style="text-align: center; color: var(--text-medium); grid-column: 1/-1;">Please select a ward first</p>';
            return;
        }
        
        const ward = wardsData.find(w => w.id === wardId);
        if (!ward) return;
        
        bedGrid.innerHTML = '';
        
        // Determine occupied beds
        const occupiedBeds = ward.patients.map(p => p.bedNumber);
        
        // Create bed selection grid
        for (let i = 1; i <= ward.totalBeds; i++) {
            const isOccupied = occupiedBeds.includes(i);
            const bedElement = document.createElement('div');
            bedElement.className = `bed-select ${isOccupied ? 'occupied' : 'available'}`;
            bedElement.textContent = `Bed ${i}`;
            bedElement.dataset.bed = i;
            
            if (!isOccupied) {
                bedElement.addEventListener('click', function() {
                    // Remove selected class from all beds
                    document.querySelectorAll('#transferBedGrid .bed-select').forEach(b => b.classList.remove('selected'));
                    // Add selected class to clicked bed
                    this.classList.add('selected');
                });
            }
            
            bedGrid.appendChild(bedElement);
        }
    };
    
    // Patient action functions
    window.viewPatientDetails = function(patientId) {
        const patient = patientsInWards.find(p => p.id === patientId);
        if (patient) {
            window.open(`patients.html?patient=${patientId}`, '_blank');
        }
    };
    
    window.transferPatient = function(patientId) {
        const patient = patientsInWards.find(p => p.id === patientId);
        if (patient) {
            document.getElementById('transferPatient').value = patientId;
            loadCurrentWard();
            openTransferModal();
        }
    };
    
    window.dischargePatient = function(patientId) {
        if (confirm(`Are you sure you want to discharge this patient from the ward?`)) {
            // In a real app, you would update the database
            alert(`Patient ${patientId} has been discharged from the ward.`);
        }
    };
    
    window.viewMedicalRecords = function(patientId) {
        const patient = patientsInWards.find(p => p.id === patientId);
        if (patient) {
            alert(`Opening medical records for ${patient.name}...\n\nThis would show: Medical History, Prescriptions, Lab Reports, etc.`);
        }
    };
    
    // Action bar functions
    window.viewWardDetails = function() {
        if (selectedWards.size === 0) {
            alert('Please select a ward to view details.');
            return;
        }
        
        if (selectedWards.size === 1) {
            const wardId = Array.from(selectedWards)[0];
            const ward = wardsData.find(w => w.id === wardId);
            if (ward) {
                const patientsList = ward.patients.map(p => `${p.patientName} (Bed ${p.bedNumber})`).join('\n');
                alert(`Ward Details:\n\nName: ${ward.name}\nType: ${ward.type}\nFloor: ${ward.floor}\nTotal Beds: ${ward.totalBeds}\nAvailable Beds: ${ward.availableBeds}\nCharge Nurse: ${ward.chargeNurse}\n\nPatients:\n${patientsList || 'No patients'}`);
            }
        } else {
            alert(`Viewing details for ${selectedWards.size} selected wards.`);
        }
    };
    
    window.dischargeFromWard = function() {
        if (selectedWards.size === 0) {
            alert('Please select wards to discharge patients from.');
            return;
        }
        
        alert(`Discharging all patients from ${selectedWards.size} selected ward(s).`);
    };
    
    window.generateWardReport = function() {
        if (selectedWards.size === 0) {
            alert('Please select wards to generate report.');
            return;
        }
        
        alert(`Generating ward report for ${selectedWards.size} ward(s)...\n\nReport includes: Occupancy rates, Patient details, Staff assignments, Equipment status.`);
    };
    
    window.maintenanceRequest = function() {
        alert('Opening maintenance request form...\n\nYou can report: Broken equipment, Cleaning requests, Repairs needed, etc.');
    };
    
    // Print floor plan
    window.printFloorPlan = function() {
        alert('Printing hospital floor plan...\n\nThe floor plan layout will be sent to the printer.');
    };
    
    // Form submission handlers
    document.getElementById('wardForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get form values
        const wardName = document.getElementById('wardName').value;
        const wardType = document.getElementById('wardType').value;
        const wardFloor = document.getElementById('wardFloor').value;
        const totalBeds = parseInt(document.getElementById('totalBeds').value);
        
        // Create new ward
        const newWard = {
            id: `${wardType.toUpperCase().substring(0,2)}-${Math.floor(Math.random() * 900) + 100}`,
            name: wardName,
            type: wardType,
            floor: wardFloor,
            totalBeds: totalBeds,
            availableBeds: totalBeds, // Initially all beds available
            chargeNurse: document.getElementById('chargeNurse').value,
            doctor: document.getElementById('assignedDoctor').value || 'Not assigned',
            patients: [],
            equipment: [],
            description: document.getElementById('wardDescription').value || 'No description'
        };
        
        // Add to wards data
        wardsData.push(newWard);
        
        alert(`New ward created successfully!\n\nWard ID: ${newWard.id}\nName: ${wardName}\nType: ${wardType}\nBeds: ${totalBeds}\nFloor: ${wardFloor}`);
        
        closeModal('addWardModal');
        this.reset();
        populateFloorPlan(currentFloor);
        updateStats();
    });
    
    document.getElementById('assignBedForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Get form values
        const patientId = document.getElementById('patientSelect').value;
        const wardId = document.getElementById('wardSelect').value;
        const selectedBed = document.querySelector('.bed-select.selected');
        
        if (!selectedBed) {
            alert('Please select a bed!');
            return;
        }
        
        const bedNumber = parseInt(selectedBed.dataset.bed);
        const admissionDate = document.getElementById('admissionDate').value;
        
        // Update ward data
        const ward = wardsData.find(w => w.id === wardId);
        if (ward) {
            // Add patient to ward
            ward.patients.push({
                patientId: patientId,
                patientName: document.getElementById('patientSelect').options[document.getElementById('patientSelect').selectedIndex].text.split('(')[0].trim(),
                bedNumber: bedNumber,
                admissionDate: admissionDate
            });
            
            ward.availableBeds--;
            
            // Add to patients in wards
            const patientName = document.getElementById('patientSelect').options[document.getElementById('patientSelect').selectedIndex].text.split('(')[0].trim();
            const newPatient = {
                id: patientId,
                name: patientName,
                avatar: `https://randomuser.me/api/portraits/${Math.random() > 0.5 ? 'men' : 'women'}/${Math.floor(Math.random() * 50) + 1}.jpg`,
                age: Math.floor(Math.random() * 50) + 20,
                gender: Math.random() > 0.5 ? 'Male' : 'Female',
                doctor: document.getElementById('admittingDoctor').options[document.getElementById('admittingDoctor').selectedIndex].text,
                ward: wardId,
                bed: `Bed ${bedNumber}`,
                admissionDate: admissionDate,
                expectedDischarge: new Date(new Date(admissionDate).getTime() + (parseInt(document.getElementById('expectedStay').value) * 24 * 60 * 60 * 1000)).toISOString().split('T')[0],
                diagnosis: document.getElementById('patientSelect').options[document.getElementById('patientSelect').selectedIndex].text.split('(')[1]?.replace(')', '') || 'Unknown',
                status: 'stable',
                priority: document.getElementById('priorityLevel').value
            };
            
            patientsInWards.push(newPatient);
        }
        
        alert(`Patient assigned to ${wardId}, Bed ${bedNumber}!\n\nAdmission successful.`);
        
        closeModal('assignBedModal');
        this.reset();
        populateFloorPlan(currentFloor);
        populatePatientsTable();
        updateStats();
    });
    
    document.getElementById('transferForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const patientId = document.getElementById('transferPatient').value;
        const toWard = document.getElementById('transferToWard').value;
        const selectedBed = document.querySelector('#transferBedGrid .bed-select.selected');
        
        if (!selectedBed) {
            alert('Please select a bed in the destination ward!');
            return;
        }
        
        const bedNumber = parseInt(selectedBed.dataset.bed);
        
        // Update patient record
        const patient = patientsInWards.find(p => p.id === patientId);
        if (patient) {
            const fromWard = patient.ward;
            
            // Update ward data
            const fromWardObj = wardsData.find(w => w.id === fromWard);
            const toWardObj = wardsData.find(w => w.id === toWard);
            
            if (fromWardObj && toWardObj) {
                // Remove from old ward
                fromWardObj.patients = fromWardObj.patients.filter(p => p.patientId !== patientId);
                fromWardObj.availableBeds++;
                
                // Add to new ward
                toWardObj.patients.push({
                    patientId: patientId,
                    patientName: patient.name,
                    bedNumber: bedNumber,
                    admissionDate: new Date().toISOString().split('T')[0]
                });
                toWardObj.availableBeds--;
                
                // Update patient record
                patient.ward = toWard;
                patient.bed = `Bed ${bedNumber}`;
            }
        }
        
        alert(`Patient transferred from ${document.getElementById('currentWard').value} to ${toWard}, Bed ${bedNumber}!\n\nTransfer successful.`);
        
        closeModal('transferModal');
        this.reset();
        populateFloorPlan(currentFloor);
        populatePatientsTable();
        updateStats();
    });
    
    // Initialize the page
    populateFloorPlan();
    populatePatientsTable();
    updateStats();
    
    // Set today's date in forms
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('admissionDate').value = today;
    
    // Close modal when clicking outside
    window.onclick = function(event) {
        if (event.target.classList.contains('modal')) {
            event.target.style.display = 'none';
        }
    };
});
</script>
</body>
</html>